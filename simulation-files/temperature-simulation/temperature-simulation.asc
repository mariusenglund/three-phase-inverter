Version 4
SHEET 1 2208 2356
WIRE -352 -208 -480 -208
WIRE 192 -208 -352 -208
WIRE 192 -192 192 -208
WIRE 288 -176 256 -176
WIRE 336 -176 288 -176
WIRE -480 -48 -480 -208
WIRE -32 -48 -128 -48
WIRE 80 -48 48 -48
WIRE 128 -48 80 -48
WIRE -352 -32 -352 -208
WIRE -272 -32 -352 -32
WIRE -128 -16 -128 -48
WIRE -272 16 -272 -32
WIRE -352 32 -352 -32
WIRE 192 64 192 -16
WIRE 192 80 192 64
WIRE 352 80 192 80
WIRE 528 80 432 80
WIRE 688 80 608 80
WIRE -480 96 -480 32
WIRE -480 96 -560 96
WIRE -128 96 -128 64
WIRE 192 96 192 80
WIRE 192 96 -128 96
WIRE -560 128 -560 96
WIRE -352 144 -352 96
WIRE -272 144 -272 96
WIRE -272 144 -352 144
WIRE -480 192 -480 96
WIRE -352 192 -352 144
WIRE -272 192 -272 144
WIRE 192 224 192 96
WIRE -352 304 -352 256
WIRE -272 304 -272 272
WIRE -272 304 -352 304
WIRE -16 304 -128 304
WIRE 144 304 64 304
WIRE -128 336 -128 304
WIRE -480 448 -480 272
WIRE -352 448 -352 304
WIRE -352 448 -480 448
WIRE -128 448 -128 416
WIRE -128 448 -352 448
WIRE 192 448 192 320
WIRE 192 448 -128 448
WIRE 688 448 688 80
WIRE 688 448 192 448
WIRE 208 512 -128 512
WIRE 208 560 208 512
WIRE 304 560 208 560
WIRE 416 560 368 560
WIRE -528 592 -992 592
WIRE -416 592 -464 592
WIRE -96 592 -208 592
WIRE 0 592 -96 592
WIRE 80 592 64 592
WIRE 112 592 80 592
WIRE 208 592 176 592
WIRE 304 592 208 592
WIRE -528 624 -624 624
WIRE -416 624 -464 624
WIRE 80 672 80 592
WIRE 112 672 80 672
WIRE 208 672 208 592
WIRE 208 672 192 672
WIRE 208 704 208 672
WIRE -992 768 -992 592
WIRE -624 768 -624 624
WIRE 208 784 208 768
WIRE -96 816 -96 592
WIRE 208 816 -96 816
WIRE -992 864 -992 848
WIRE -624 864 -624 848
WIRE 208 864 208 816
WIRE 320 864 208 864
WIRE 432 864 384 864
WIRE -128 896 -128 512
WIRE -128 896 -208 896
WIRE 16 896 -128 896
WIRE 96 896 80 896
WIRE 128 896 96 896
WIRE 224 896 192 896
WIRE 320 896 224 896
WIRE 96 976 96 896
WIRE 128 976 96 976
WIRE 224 976 224 896
WIRE 224 976 208 976
WIRE 224 1008 224 976
WIRE 224 1088 224 1072
FLAG -624 864 0
FLAG -992 864 0
FLAG -416 592 ctrl_top
FLAG -416 624 ctrl_bot
FLAG 224 1088 0
FLAG 208 784 0
FLAG -208 592 ctrl_top
FLAG -208 896 ctrl_bot
FLAG 416 560 ctrl_top_dt
FLAG 432 864 ctrl_bot_dt
FLAG -560 128 0
FLAG 80 -48 gate
FLAG 192 -208 C
FLAG 192 64 E
FLAG 288 -176 Tc
SYMBOL voltage -480 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {Ud2}
SYMBOL res 448 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 60
SYMBOL voltage -624 752 R0
WINDOW 3 56 62 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 0 {Ts2} {Ts2} 0 {Ts})
SYMATTR InstName V2
SYMBOL voltage -992 752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0.5 0.25 {fmod})
SYMBOL Digital\\diffschmitt -528 544 R0
WINDOW 3 1 -8 Left 2
SYMATTR Value vt=0 vh=0.01 Vhigh=5 Vlow=0
SYMATTR InstName A1
SYMBOL bv -128 -32 R0
SYMATTR InstName B1
SYMATTR Value V=V(ctrl_top_dt)*19 - 4
SYMBOL bv -128 320 R0
SYMATTR InstName B2
SYMATTR Value V=V(ctrl_bot_dt)*19-4
SYMBOL ind 512 96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 2.6m
SYMBOL res 64 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rgate}
SYMBOL res 80 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rgate}
SYMBOL voltage -480 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {Ud2}
SYMBOL Digital\\schmtinv 16 832 R0
SYMATTR InstName A3
SYMBOL Digital\\and 352 816 R0
SYMATTR InstName A5
SYMBOL cap 208 1008 R0
SYMATTR InstName C1
SYMATTR Value 1.3n
SYMBOL res 224 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 4.7k
SYMBOL diode 192 880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL Digital\\schmtinv 0 528 R0
SYMATTR InstName A2
SYMBOL Digital\\and 336 512 R0
SYMATTR InstName A4
SYMBOL cap 192 704 R0
SYMATTR InstName C2
SYMATTR Value 1.3n
SYMBOL res 208 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 4.7k
SYMBOL diode 176 576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMBOL AutoGenerated\\IKW40N120H3_L1 176 -64 R0
SYMATTR InstName IGBT
SYMBOL AutoGenerated\\IKW40N120H3_L1 176 288 R0
SYMATTR InstName U2
SYMBOL cap -368 32 R0
SYMATTR InstName C3
SYMATTR Value {C}
SYMBOL cap -368 192 R0
SYMATTR InstName C4
SYMATTR Value {C}
SYMBOL res -288 0 R0
SYMATTR InstName R4
SYMATTR Value {R}
SYMBOL res -288 176 R0
SYMATTR InstName R7
SYMATTR Value {R}
SYMBOL SOAtherm-NMOS 192 -80 R0
WINDOW 38 30 42 Left 2
SYMATTR InstName U1
SYMATTR Value2 Tambient=40
SYMATTR SpiceLine RthetaJA = 10
SYMBOL SOAtherm-HeatSink 416 -176 R0
SYMATTR InstName U3
SYMATTR Value Rtheta=6 Tambient=40
SYMATTR SpiceModel aluminum
TEXT 720 184 Left 2 !.param Ts=1/fs
TEXT 720 216 Left 2 !.param Ts2 = Ts/2
TEXT 720 120 Left 2 !.param fmod=50
TEXT 720 88 Left 2 !.param ma = 0.5
TEXT 720 280 Left 2 !.param Ud2 = Ud/2
TEXT 720 152 Left 2 !.param fs = 5000
TEXT 720 248 Left 2 !.param Ud = 565
TEXT 720 312 Left 2 !.param C = 14e-6
TEXT 720 344 Left 2 !.param R=860k
TEXT 384 8 Left 2 ;Motor equivalent
TEXT -344 -80 Left 2 ;DC-Link
TEXT 720 376 Left 2 !.param Rgate = 100
LINE Normal 336 144 336 32 1
LINE Normal 624 144 336 144 1
LINE Normal 624 32 624 144 1
LINE Normal 336 32 624 32 1
RECTANGLE Normal -176 336 -384 -64 1
